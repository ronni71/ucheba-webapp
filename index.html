<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 100%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 1.5em;
            margin-bottom: 5px;
        }
        
        .content {
            padding: 20px;
        }
        
        .step {
            background: #f8f9fa;
            border-left: 4px solid #4facfe;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 0 10px 10px 0;
        }
        
        .step-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
            font-size: 1.1em;
        }
        
        .formula {
            background: #e3f2fd;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        .explanation {
            color: #666;
            line-height: 1.5;
        }
        
        .final-answer {
            background: #e8f5e8;
            border: 2px solid #4caf50;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
        }
        
        .final-answer h3 {
            color: #2e7d32;
            margin-bottom: 10px;
        }
        
        .answer-text {
            font-size: 1.2em;
            font-weight: bold;
            color: #1b5e20;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        .error {
            background: #ffebee;
            border: 2px solid #f44336;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            color: #c62828;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìö –†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏</h1>
            <p>–í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä</p>
        </div>
        
        <div class="content" id="content">
            <div class="loading" id="loading">
                <p>‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—à–µ–Ω–∏—è...</p>
            </div>
        </div>
    </div>

    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–µ–∫–æ–º–ø—Ä–µ—Å—Å–∏–∏ –¥–∞–Ω–Ω—ã—Ö
        function decompressData(encoded) {
            try {
                // Base64 decode
                const binaryString = atob(encoded.replace(/-/g, '+').replace(/_/g, '/'));
                const bytes = new Uint8Array(binaryString.length);
                for (let i = 0; i < binaryString.length; i++) {
                    bytes[i] = binaryString.charCodeAt(i);
                }
                
                // Decompress
                const decompressed = pako.inflate(bytes, { to: 'string' });
                return JSON.parse(decompressed);
            } catch (error) {
                console.error('Decompression error:', error);
                return null;
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ URL
        function getDataFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            const encodedData = urlParams.get('data');
            
            if (!encodedData) {
                return null;
            }
            
            return decompressData(encodedData);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ—à–µ–Ω–∏—è
        function displaySolution(data) {
            const content = document.getElementById('content');
            const loading = document.getElementById('loading');
            
            if (!data) {
                loading.innerHTML = `
                    <div class="error">
                        <h3>‚ùå –û—à–∏–±–∫–∞</h3>
                        <p>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —à–∞–≥–∏
            if (data.s && data.s.length > 0) {
                data.s.forEach((step, index) => {
                    html += `
                        <div class="step">
                            <div class="step-title">${index + 1}. ${step.t || '–®–∞–≥ ' + (index + 1)}</div>
                            ${step.f ? `<div class="formula">${step.f}</div>` : ''}
                            <div class="explanation">${step.e || '–û–±—ä—è—Å–Ω–µ–Ω–∏–µ'}</div>
                        </div>
                    `;
                });
            }
            
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
            if (data.a) {
                html += `
                    <div class="final-answer">
                        <h3>‚úÖ –û—Ç–≤–µ—Ç</h3>
                        <div class="answer-text">${data.a}</div>
                    </div>
                `;
            }
            
            content.innerHTML = html;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            const data = getDataFromUrl();
            displaySolution(data);
        });
    </script>
    
    <!-- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –¥–µ–∫–æ–º–ø—Ä–µ—Å—Å–∏–∏ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
</body>
</html>
